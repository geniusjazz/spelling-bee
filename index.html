<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Spelling Bee</title>
  <link rel="stylesheet" href="./css/styles.css">
</head>
<body>
  <div id="mainContent">
    <div id="wordDisplay"></div>
    <div id="part"></div>
    <div id="definition"></div>
    <div id="wordIndex"></div>
    <button id="pronounce">Pronounce</button>
    <button id="fullPronounce">Full Pronunciation</button>
    <button id="checkAnswer">Check</button>
    <button id="showAnswer" style="display: none;">Show Answer</button>
    <div id="progress-bar"></div>
    <div id="progress-text"></div>
    <div id="mascot"></div>
    <div id="feedback"></div>
    <div id="celebration"><span class="celebration-text"></span></div>
    <div id="level-complete"><span class="level-complete-text"></span></div>
    <div id="confirmPopup" style="display: none;"></div>
    <div id="resetConfirmPopup" style="display: none;"></div>
    <button id="wordListButton">Word List</button>
    <button id="resetButton">Reset</button>
  </div>
  <div id="keyboard"></div>
  <select id="levelSelect"></select>
  <script src="https://geniusjazz.github.io/spelling-bee/words.js"></script>
  <script type="module" src="./js/storage.js"></script>
  <script type="module" src="./js/levelSelector.js"></script>
  <script type="module" src="./js/pronunciation.js"></script>
  <script type="module" src="./js/keyboard.js"></script>
  <script type="module" src="./js/ui.js"></script>
  <script type="module" src="./js/main.js"></script>
  <script type="module">
    import { startGame } from './js/main.js';

    function initGame() {
      console.log("Checking DOM readiness...");
      if (!document.getElementById("mainContent")) {
        console.log("DOM not ready, retrying...");
        setTimeout(initGame, 100);
        return;
      }
      console.log("DOM ready, checking words.js...");
      if (typeof words !== 'undefined' && words.length > 0) {
        console.log("words.js loaded, starting game...");
        startGame();
      } else {
        console.log("Waiting for words.js...");
        document.querySelector('script[src="https://geniusjazz.github.io/spelling-bee/words.js"]').onload = () => {
          console.log("words.js loaded, starting game...");
          startGame();
        };
        document.querySelector('script[src="https://geniusjazz.github.io/spelling-bee/words.js"]').onerror = () => {
          console.error("Failed to load words.js");
          document.getElementById("mainContent").innerText = "Error: Could not load word list.";
        };
      }
    }

    document.addEventListener('DOMContentLoaded', () => {
      console.log("DOM loaded");
      initGame();
    });
  </script>
</body>
</html>
